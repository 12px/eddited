/* eddited plugin
   Sidebar Image
/*============================*/


/*---- Define Plugin ----*/

.sidebar-popout(@enabled) when (@enabled) {

  // mixin to find positioning
  // based on sidebar-image
  .get-top(@h) when (@enable-sidebar-image) {
    margin-top: @h - (@sidebar-image-height - 24px);
  }
  .get-top(@h) when not (@enable-sidebar-image) {
    margin-top: @h + 24px;
  }


  // hide popout unless hover
  .titlebox:not(:hover) {
    .tagline,
    .subscribers,
    .users-online,
    form.flairtoggle,
    .toggle.res-sr-style-toggle,
    .subButtons .res-fancy-toggle-button {
      right: -500px;
    }
  }

  // or if hover redditname
  .titlebox .redditname:hover {
    ~ .tagline,
    ~ .subscribers,
    ~ .users-online,
    ~ form.flairtoggle,
    ~ .toggle.res-sr-style-toggle,
    ~ .subButtons .res-fancy-toggle-button {
      right: -500px;
    }
  }

  // hide popout unless hover
  .titlebox:hover {
    .tagline,
    .subscribers,
    .users-online,
    .leavemoderator,
    form.flairtoggle,
    .res-fancy-toggle-button,
    .toggle.res-sr-style-toggle,
    form.leavecontributor-button {
      transition-delay: 1.5s;
    }
  }

  // popout styles
  .titlebox {

    // full width popups
    .toggle.res-sr-style-toggle {
      width: @width-sidebar;
      right: @width-sidebar - 12;
    }

    // half width popups (both)
    .subscribers,
    .users-online,
    .res-fancy-toggle-button {
      width: (@width-sidebar / 2);
    }

    // half width right
    .tagline,
    .subscribers,
    .res-fancy-toggle-button.RESshortcut {
      right: @width-sidebar - 12;
    }

    // half width left
    .users-online,
    .res-fancy-toggle-button.RESDashboardToggle {
      right: @width-sidebar + (@width-sidebar / 2) - 12;
    }

    // general styles
    .tagline,
    .subscribers,
    .users-online,
    form.flairtoggle,
    .res-fancy-toggle-button,
    .toggle.res-sr-style-toggle {
      z-index: 1000;
      padding: 12px;
      display: block;
      position: absolute;
      text-align: center !important;
      box-sizing: border-box;
      background: @color-shadow;
      border: 1px solid @color-border;
      border-right-color: transparent;
      transition: all 0.5s ease;
    }

    // border padding for offset
    .tagline,
    .subscribers,
    .toggle.res-sr-style-toggle,
    .res-fancy-toggle-button.RESshortcut {
      border-right: 10px solid @color-background;
    }

    // specific positioning
    .subButtons {
      margin-bottom: -10px;
    }

    .subscribers,
    .users-online {
      .get-top(0px);
    }

    .toggle.res-sr-style-toggle {
      margin-top: 20px;
    }

    .tagline,
    form.flairtoggle {
      .get-top(37px) !important;
    }

    .tagline {
      padding: 13px 12px;
      width: @width-sidebar - 75px;
    }

    form.flairtoggle {
      width: 75px;
      right: @width-sidebar + (@width-sidebar - 75px) - 12;
    }

    .res-fancy-toggle-button {
      .get-top(66px);
    }

  }

}

/*---- Use Plugin if Enabled ----*/

.sidebar-popout(@enable-sidebar-popout);
